# ğŸ¯ Student Preference & Matching System - Quick Start

## ğŸš€ Complete System Overview

Your APPE system now has **automated preference-based matching** that:

âœ… Lets students rank their top 3 specialty & site preferences  
âœ… Runs smart algorithm considering GPA, preferences, and availability  
âœ… Maximizes student satisfaction while respecting capacity limits  
âœ… Exports results and saves to assignments automatically  

---

## ğŸ“Š Visual Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PREFERENCE & MATCHING WORKFLOW                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN PREPARATION   â”‚
â”‚  (You do this first) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    ğŸ—‚ï¸ Set Preceptor Availability
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Preceptors Tab                   â”‚
    â”‚ â†’ Edit availability for R8       â”‚
    â”‚ â†’ Check R8 for each preceptor    â”‚
    â”‚ â†’ Save                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    âœ… Result: 15 preceptors available
    
    
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STUDENT SUBMISSION  â”‚
â”‚  (Students do this)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    ğŸ“ Student Opens Portal
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Students Tab â†’ ğŸ“ Portal button  â”‚
    â”‚ â†’ Sees upcoming rotations        â”‚
    â”‚ â†’ Clicks "Submit Preferences"    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    ğŸ“‹ Fills Preference Form
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1st Choice: Critical Care        â”‚
    â”‚ 2nd Choice: Cardiology           â”‚
    â”‚ 3rd Choice: Nephrology           â”‚
    â”‚                                  â”‚
    â”‚ 1st Site: KAMC-Riyadh           â”‚
    â”‚ 2nd Site: KFMC                  â”‚
    â”‚ 3rd Site: NGH                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    âœ… Submission Saved
    

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN MATCHING      â”‚
â”‚  (You run algorithm) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    ğŸ” View Submission Status
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Preferences Tab                  â”‚
    â”‚ â†’ See 45/59 students submitted   â”‚
    â”‚ â†’ See top choices                â”‚
    â”‚ â†’ Click "Run Matching"           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    âš™ï¸ Configure Matching
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Choose:                          â”‚
    â”‚ â—‹ Automatic (saves immediately)  â”‚
    â”‚ â— Preview (review first)         â”‚
    â”‚                                  â”‚
    â”‚ Click "Run Matching"             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    ğŸ¤– Algorithm Runs
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Sort students by GPA          â”‚
    â”‚ 2. For each student:             â”‚
    â”‚    - Try 9 preference combos     â”‚
    â”‚    - Find best available match   â”‚
    â”‚    - Check preceptor capacity    â”‚
    â”‚ 3. Assign best match             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    ğŸ“Š View Results
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Perfect Matches: 30 (100 score)  â”‚
    â”‚ Good Matches: 10 (75-99)         â”‚
    â”‚ Fair Matches: 5 (50-74)          â”‚
    â”‚ Average Score: 88.5/100          â”‚
    â”‚                                  â”‚
    â”‚ âœ… Finalize Matches              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    ğŸ’¾ Saved to Assignments
    

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STUDENT VIEW        â”‚
â”‚  (Students see)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    ğŸ“ Check Portal
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Portal shows new assignment:     â”‚
    â”‚                                  â”‚
    â”‚ R8 - Critical Care               â”‚
    â”‚ KAMC-Riyadh                     â”‚
    â”‚ Dr. Sarah AlMutairi             â”‚
    â”‚ Match: Perfect (100)             â”‚
    â”‚ Status: Assigned                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Quick Access Guide

### For You (Administrator)

| Task | Location | Action |
|------|----------|--------|
| **Set preceptor availability** | Preceptors Tab | Click âœï¸ Edit â†’ Check R8 â†’ Save |
| **View submitted preferences** | Preferences Tab | See counts & top choices |
| **Run matching algorithm** | Schedule Tab or Preferences Tab | Click ğŸ¯ Run Matching |
| **Review match results** | After matching | See scores & assignments |
| **Export results** | Results modal | Click ğŸ“¥ Export CSV |

### For Students (via Portal)

| Task | Location | Action |
|------|----------|--------|
| **Submit preferences** | Portal â†’ Upcoming rotation | Click ğŸ¯ Submit Preferences |
| **View assignment** | Portal â†’ My Assignments | See matched rotation details |

---

## ğŸ“‹ Example: Planning R8 Rotation

### Week 1: Preparation (Early August 2026)

```bash
âœ… Go to Preceptors Tab
âœ… Set availability for R8:
   - Dr. Sarah AlMutairi â†’ Check R8
   - Dr. Abdullah Al-Rasheed â†’ Check R8
   - Dr. Maha Al-Ghamdi â†’ Check R8
   ... (15 preceptors total)
âœ… Result: R8 ready for preferences
```

### Week 2-3: Student Submission (Mid-August 2026)

```bash
ğŸ“§ Email students: "Submit R8 preferences by Aug 25"

Students submit preferences:
âœ… Day 1: 15 students
âœ… Day 5: 30 students
âœ… Day 10: 45 students
âœ… Day 14: 52 students

Check progress: Preferences Tab
```

### Week 4: Run Matching (Late August 2026)

```bash
âœ… Go to Preferences Tab
âœ… Click "Run Matching" for R8
âœ… Choose "Preview Only"
âœ… Review results:
   - 35 perfect matches (100)
   - 12 good matches (80-99)
   - 5 fair matches (60-79)
   - Average: 90/100
âœ… Looks good! Click "Finalize Matches"
âœ… 52 assignments created
```

### Week 5: Students View (Early September 2026)

```bash
Students log in and see:
âœ… R8 assignment in portal
âœ… Preceptor contact info
âœ… Match quality (most got 1st/2nd choice)
âœ… Ready to start rotation
```

---

## ğŸ”¢ Matching Score Examples

| Student | 1st Spec | 1st Site | Assigned | Score | Interpretation |
|---------|----------|----------|----------|-------|----------------|
| Ahmad Ali | Critical Care | KAMC | Critical Care, KAMC | **100** | Perfect! Both 1st choices |
| Sara Mohammed | Cardiology | KFMC | Cardiology, KAMC | **90** | 1st specialty, 2nd site |
| Fahad Hassan | Oncology | NGH | Critical Care, KAMC | **0** | No match (assigned to available) |

---

## ğŸ’¡ Pro Tips

### 1. **Communication is Key**
```
- Email students when preferences open
- Set clear deadline (2-3 weeks)
- Send reminders at 1 week, 3 days, 1 day
- Show completion rate in Preferences tab
```

### 2. **Use Preview Mode First**
```
- Always preview before finalizing
- Check for any anomalies
- Review students with score < 50
- Adjust manually if needed
```

### 3. **Balance Capacity**
```
- Each preceptor max 3 students
- If popular specialty, add more preceptors
- Set availability strategically
```

### 4. **Monitor Progress**
```
- Check Preferences tab daily during submission period
- Follow up with non-submitters
- View top choices to predict demand
```

---

## ğŸ†˜ Common Questions

**Q: What if student doesn't submit preferences?**  
A: They can be assigned manually OR submit late (you can run matching again)

**Q: Can I override the matching?**  
A: Yes! Results are just assignments - you can edit them manually after

**Q: What if two students want same preceptor?**  
A: Algorithm assigns by GPA order - higher GPA gets priority

**Q: Can student change preferences after submitting?**  
A: Yes, they can resubmit - system updates their record

**Q: How many students per preceptor?**  
A: Max 3 (configurable in code - search for `preceptorLoad[p.id] < 3`)

---

## ğŸ“ Files Modified

```
âœ… js/attendance-schedule.js    (preference submission forms)
âœ… js/matching-algorithm.js     (NEW - matching logic)
âœ… js/appe-hub.js               (schedule buttons, preferences tab)
âœ… index.html                   (load matching script)
```

---

## ğŸ‰ You're Ready!

The preference and matching system is now **fully functional** and ready to use!

### Next Steps:

1. **Test the workflow** with a few students for upcoming rotation
2. **Set preceptor availability** for R8, R9, R10
3. **Have students submit** preferences
4. **Run matching** in preview mode
5. **Review and finalize** assignments

---

**Need Help?** Check [PREFERENCE_MATCHING_GUIDE.md](PREFERENCE_MATCHING_GUIDE.md) for detailed documentation.

**Last Updated:** January 12, 2026  
**Version:** 1.0  
**Status:** âœ… Production Ready
