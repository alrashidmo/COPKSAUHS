<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1B5E20">
    <title>APPE Student Portal - Enhanced</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1B5E20;
            --primary-light: #4CAF50;
            --primary-dark: #0d3310;
            --bg-gray: #f5f7fa;
            --text-dark: #1f2937;
            --text-gray: #6b7280;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
        }

        [data-theme="dark"] {
            --primary: #1B5E20;
            --primary-light: #4CAF50;
            --primary-dark: #0d3310;
            --bg-gray: #1f2937;
            --text-dark: #f3f4f6;
            --text-gray: #d1d5db;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-gray);
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
            -webkit-user-select: none;
            user-select: none;
            padding-bottom: 70px;
            transition: background 0.3s ease, color 0.3s ease;
        }

        /* Page Transitions */
        .page {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        /* Header with Theme Toggle */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 0 0 1.5rem 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .header p {
            opacity: 0.9;
            font-size: 0.875rem;
        }

        .theme-toggle {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.25rem;
        }

        .theme-toggle:active {
            transform: scale(0.9);
            background: rgba(255,255,255,0.3);
        }

        /* Search Bar */
        .search-container {
            margin-top: 1rem;
            position: relative;
            z-index: 1;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 2rem;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .search-input:focus {
            outline: none;
            background: rgba(255,255,255,0.3);
            box-shadow: 0 0 10px rgba(255,255,255,0.2);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-top: 1rem;
            position: relative;
            z-index: 1;
        }

        .stat-card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 0.75rem;
            padding: 0.75rem;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .stat-card:active {
            transform: scale(0.95);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.75rem;
            opacity: 0.9;
            margin-top: 0.25rem;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .quick-action {
            background: white;
            border: none;
            border-radius: 0.75rem;
            padding: 1rem 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-dark);
        }

        [data-theme="dark"] .quick-action {
            background: #374151;
            color: var(--text-dark);
        }

        .quick-action:active {
            transform: scale(0.95);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .quick-action-icon {
            font-size: 1.75rem;
        }

        /* Content */
        .content {
            padding: 1rem;
        }

        /* Notification Badge */
        .notification-badge {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            background: linear-gradient(135deg, var(--info) 0%, #2563eb 100%);
            color: white;
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
            max-width: 90%;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 1rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        [data-theme="dark"] .card {
            background: #374151;
        }

        .card:active {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        .card.trending {
            border-left-color: var(--success);
        }

        .card.warning {
            border-left-color: var(--warning);
        }

        .card.danger {
            border-left-color: var(--danger);
        }

        /* Progress Bars */
        .progress-bar {
            width: 100%;
            height: 0.5rem;
            background: #e5e7eb;
            border-radius: 2rem;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        [data-theme="dark"] .progress-bar {
            background: #4b5563;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-light), var(--primary));
            transition: width 0.3s ease;
            border-radius: 2rem;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 1.5rem 0;
        }

        /* Calendar */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            background: #f3f4f6;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        [data-theme="dark"] .calendar-day {
            background: #4b5563;
        }

        .calendar-day.today {
            background: var(--primary-light);
            color: white;
            font-weight: bold;
        }

        .calendar-day.event {
            border: 2px solid var(--info);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.375rem 0.75rem;
            border-radius: 2rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-green {
            background: #dcfce7;
            color: #166534;
        }

        [data-theme="dark"] .badge-green {
            background: #1b4332;
            color: #81c784;
        }

        .badge-blue {
            background: #dbeafe;
            color: #1e40af;
        }

        [data-theme="dark"] .badge-blue {
            background: #1e3a8a;
            color: #93c5fd;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 0.5rem 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }

        [data-theme="dark"] .bottom-nav {
            background: #374151;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem;
            border: none;
            background: none;
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            position: relative;
        }

        .nav-item.active {
            color: var(--primary-light);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: var(--primary-light);
            border-radius: 50%;
        }

        .nav-item svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        .nav-label {
            font-size: 0.625rem;
            font-weight: 500;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: flex-end;
            animation: slideUp 0.3s ease-out;
        }

        .modal.active {
            display: flex;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-content {
            background: white;
            width: 100%;
            border-radius: 1.5rem 1.5rem 0 0;
            padding: 2rem 1.5rem 1.5rem;
            max-height: 80vh;
            overflow-y: auto;
        }

        [data-theme="dark"] .modal-content {
            background: #374151;
        }

        /* Notification Dot */
        .notification-dot {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 0.5rem;
            height: 0.5rem;
            background: var(--danger);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Pull to Refresh */
        .pull-to-refresh {
            position: absolute;
            top: -50px;
            left: 0;
            right: 0;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-light);
            font-size: 0.875rem;
            transition: transform 0.3s ease;
        }

        /* Animations */
        .fade-enter {
            animation: fadeIn 0.3s ease-in-out;
        }

        .slide-enter {
            animation: slideIn 0.3s ease-out;
        }

        /* Loading Skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        /* Haptic Feedback (visual only) */
        .haptic-feedback {
            animation: hapticVibrate 0.1s ease-in-out;
        }

        @keyframes hapticVibrate {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-1px); }
            75% { transform: translateX(1px); }
        }

        /* Header Navigation Tabs */
        .header-tabs {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            position: relative;
            z-index: 1;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .tab-btn {
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: white;
            border-radius: 2rem;
            font-size: 0.75rem;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        /* Message Bubble */
        .message-bubble {
            display: flex;
            margin-bottom: 1rem;
            gap: 0.75rem;
        }

        .message-bubble.sent {
            justify-content: flex-end;
        }

        .message-content {
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message-bubble.received .message-content {
            background: #e5e7eb;
            color: var(--text-dark);
        }

        [data-theme="dark"] .message-bubble.received .message-content {
            background: #4b5563;
        }

        .message-bubble.sent .message-content {
            background: var(--primary-light);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);">
        <div style="background: white; border-radius: 1.5rem; padding: 2rem; width: 90%; max-width: 400px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <div style="text-align: center; margin-bottom: 2rem;">
                <div style="width: 4rem; height: 4rem; background: linear-gradient(135deg, var(--primary-light), var(--primary)); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: white; font-size: 2rem;">üéì</div>
                <h1 style="font-size: 1.5rem; font-weight: 700; color: var(--text-dark); margin-bottom: 0.5rem;">APPE Portal</h1>
                <p style="color: var(--text-gray);">Advanced Pharmacy Practice Experience</p>
            </div>

            <div style="background: #fef3c7; padding: 0.75rem; border-radius: 0.5rem; font-size: 0.75rem; margin-bottom: 1.5rem; text-align: center; color: #92400e;">
                <strong>Demo: </strong>ahmed.almansour@student.ksau-hs.edu.sa
            </div>

            <form id="loginForm" style="display: flex; flex-direction: column; gap: 1rem;">
                <div>
                    <label style="display: block; font-weight: 500; margin-bottom: 0.5rem; color: var(--text-dark);">Email</label>
                    <input type="email" id="emailInput" value="ahmed.almansour@student.ksau-hs.edu.sa" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.875rem;">
                </div>
                <div>
                    <label style="display: block; font-weight: 500; margin-bottom: 0.5rem; color: var(--text-dark);">Password</label>
                    <input type="password" id="passwordInput" value="password" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.875rem;">
                </div>
                <button type="submit" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); color: white; padding: 0.875rem; border: none; border-radius: 0.75rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">Sign In</button>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <!-- Dashboard Tab -->
        <div id="dashboardPage" class="page active">
            <div class="pull-to-refresh" id="pullRefresh">‚Üì Pull to refresh</div>
            
            <div class="header">
                <div class="header-top">
                    <div>
                        <h1>Dashboard</h1>
                        <p id="studentName">Ahmed Al-Mansour</p>
                    </div>
                    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
                </div>
                
                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search surveys, participation...">
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">4.75</div>
                        <div class="stat-label">GPA</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">60%</div>
                        <div class="stat-label">Progress</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Tasks</div>
                    </div>
                </div>
            </div>

            <div class="content">
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="quick-action" onclick="openModal('newSurvey')">
                        <span class="quick-action-icon">üìã</span>
                        <span>Survey</span>
                    </button>
                    <button class="quick-action" onclick="openModal('newParticipation')">
                        <span class="quick-action-icon">üéØ</span>
                        <span>Activity</span>
                    </button>
                    <button class="quick-action" onclick="openModal('newAward')">
                        <span class="quick-action-icon">üèÜ</span>
                        <span>Award</span>
                    </button>
                    <button class="quick-action" onclick="openNotifications()">
                        <span class="quick-action-icon">üîî</span>
                        <span id="notifCount" style="font-weight: bold; color: var(--danger);">3</span>
                    </button>
                </div>

                <!-- Progress Tracking Card -->
                <div class="card trending">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="font-weight: 600;">Training Progress</h3>
                        <span class="badge badge-green">On Track</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%;"></div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem; font-size: 0.875rem;">
                        <div>
                            <div style="color: var(--text-gray);">Hours Completed</div>
                            <div style="font-weight: 600; font-size: 1.125rem;">144/240</div>
                        </div>
                        <div>
                            <div style="color: var(--text-gray);">Est. Completion</div>
                            <div style="font-weight: 600; font-size: 1.125rem;">Feb 14</div>
                        </div>
                    </div>
                </div>

                <!-- Chart -->
                <div class="card">
                    <h3 style="font-weight: 600; margin-bottom: 1rem;">Weekly Performance</h3>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>

                <!-- Upcoming Events -->
                <div class="card">
                    <h3 style="font-weight: 600; margin-bottom: 1rem;">üìÖ Upcoming</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <div style="padding: 0.75rem; background: #f3f4f6; border-radius: 0.5rem; border-left: 3px solid var(--info);">
                            <div style="font-weight: 600; font-size: 0.875rem;">PHRD 4.1 Survey Due</div>
                            <div style="font-size: 0.75rem; color: var(--text-gray);">Jan 31, 2026</div>
                        </div>
                        <div style="padding: 0.75rem; background: #f3f4f6; border-radius: 0.5rem; border-left: 3px solid var(--warning);">
                            <div style="font-weight: 600; font-size: 0.875rem;">Final Evaluation</div>
                            <div style="font-size: 0.75rem; color: var(--text-gray);">Feb 14, 2026</div>
                        </div>
                    </div>
                </div>

                <!-- Mini Calendar -->
                <div class="card">
                    <h3 style="font-weight: 600; margin-bottom: 1rem;">January 2026</h3>
                    <div style="text-align: center; margin-bottom: 0.75rem; font-size: 0.75rem; color: var(--text-gray);">
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.25rem; margin-bottom: 0.5rem;">
                            <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                        </div>
                    </div>
                    <div class="calendar-grid" id="miniCalendar"></div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <h3 style="font-weight: 600; margin-bottom: 1rem;">üìå Recent Activity</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <div style="padding: 0.75rem; border-left: 3px solid var(--success);">
                            <div style="font-weight: 600; font-size: 0.875rem;">Award Approved</div>
                            <div style="font-size: 0.75rem; color: var(--text-gray);">Dean's Honor List ‚Ä¢ 5 hours ago</div>
                        </div>
                        <div style="padding: 0.75rem; border-left: 3px solid var(--info);">
                            <div style="font-weight: 600; font-size: 0.875rem;">New Message from Preceptor</div>
                            <div style="font-size: 0.75rem; color: var(--text-gray);">Khalid Abdullah ‚Ä¢ 2 hours ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Messages Tab -->
        <div id="messagesPage" class="page">
            <div class="header">
                <h1>Messages</h1>
                <p>Chat with your preceptor</p>
            </div>

            <div class="content">
                <div class="card" style="padding: 0;">
                    <div style="padding: 1rem; border-bottom: 1px solid #e5e7eb; display: flex; align-items: center; gap: 1rem;">
                        <div style="width: 2.5rem; height: 2.5rem; background: linear-gradient(135deg, var(--primary-light), var(--primary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">KA</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; font-size: 0.875rem;">Pharm. Khalid Abdullah</div>
                            <div style="font-size: 0.75rem; color: var(--text-gray);">Online</div>
                        </div>
                    </div>

                    <div style="padding: 1rem; height: 300px; overflow-y: auto; display: flex; flex-direction: column;">
                        <div class="message-bubble received">
                            <div class="message-content">How's your rotation going?</div>
                        </div>
                        <div class="message-bubble received">
                            <div class="message-content">Any questions?</div>
                        </div>
                        <div class="message-bubble sent">
                            <div class="message-content">Great! Learning a lot üëç</div>
                        </div>
                        <div style="margin-top: auto;"></div>
                    </div>

                    <div style="padding: 1rem; border-top: 1px solid #e5e7eb; display: flex; gap: 0.5rem;">
                        <input type="text" placeholder="Type message..." style="flex: 1; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 2rem; font-size: 0.875rem;">
                        <button onclick="sendMessage()" style="width: 2.5rem; height: 2.5rem; border-radius: 50%; background: var(--primary-light); border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center;">‚û§</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div id="calendarPage" class="page">
            <div class="header">
                <h1>Calendar</h1>
                <p>Important dates & deadlines</p>
            </div>

            <div class="content">
                <div class="card">
                    <h3 style="font-weight: 600; margin-bottom: 1.5rem;">January 2026</h3>
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; margin-bottom: 2rem;">
                        <div style="text-align: center; font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Sun</div>
                        <div style="text-align: center; font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Mon</div>
                        <div style="text-align: center; font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Tue</div>
                        <div style="text-align: center; font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Wed</div>
                        <div style="text-align: center; font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Thu</div>
                        <div style="text-align: center; font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Fri</div>
                        <div style="text-align: center; font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Sat</div>
                        
                        <div style="text-align: center; color: var(--text-gray); padding: 0.75rem;">29</div>
                        <div style="text-align: center; color: var(--text-gray); padding: 0.75rem;">30</div>
                        <div style="text-align: center; padding: 0.75rem; background: var(--primary-light); color: white; border-radius: 0.5rem; font-weight: 600;">1</div>
                        <div style="text-align: center; padding: 0.75rem;">2</div>
                        <div style="text-align: center; padding: 0.75rem;">3</div>
                        <div style="text-align: center; padding: 0.75rem;">4</div>
                        <div style="text-align: center; padding: 0.75rem;">5</div>
                        
                        <div style="text-align: center; padding: 0.75rem;">6</div>
                        <div style="text-align: center; padding: 0.75rem;">7</div>
                        <div style="text-align: center; padding: 0.75rem;">8</div>
                        <div style="text-align: center; padding: 0.75rem;">9</div>
                        <div style="text-align: center; padding: 0.75rem;">10</div>
                        <div style="text-align: center; padding: 0.75rem;">11</div>
                        <div style="text-align: center; padding: 0.75rem;">12</div>
                        
                        <div style="text-align: center; padding: 0.75rem;">13</div>
                        <div style="text-align: center; padding: 0.75rem;">14</div>
                        <div style="text-align: center; padding: 0.75rem;">15</div>
                        <div style="text-align: center; padding: 0.75rem;">16</div>
                        <div style="text-align: center; padding: 0.75rem;">17</div>
                        <div style="text-align: center; padding: 0.75rem;">18</div>
                        <div style="text-align: center; padding: 0.75rem;">19</div>
                        
                        <div style="text-align: center; padding: 0.75rem;">20</div>
                        <div style="text-align: center; padding: 0.75rem;">21</div>
                        <div style="text-align: center; padding: 0.75rem;">22</div>
                        <div style="text-align: center; padding: 0.75rem;">23</div>
                        <div style="text-align: center; padding: 0.75rem;">24</div>
                        <div style="text-align: center; padding: 0.75rem;">25</div>
                        <div style="text-align: center; padding: 0.75rem;">26</div>
                        
                        <div style="text-align: center; padding: 0.75rem;">27</div>
                        <div style="text-align: center; padding: 0.75rem;">28</div>
                        <div style="text-align: center; padding: 0.75rem;">29</div>
                        <div style="text-align: center; padding: 0.75rem;">30</div>
                        <div style="text-align: center; padding: 0.75rem;">31</div>
                        <div style="text-align: center; color: var(--text-gray); padding: 0.75rem;">1</div>
                        <div style="text-align: center; color: var(--text-gray); padding: 0.75rem;">2</div>
                    </div>

                    <h3 style="font-weight: 600; margin-bottom: 1rem;">Upcoming Deadlines</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <div style="padding: 1rem; background: #fee2e2; border-radius: 0.75rem; border-left: 4px solid var(--danger);">
                            <div style="font-weight: 600; font-size: 0.875rem;">PHRD 4.1 Survey</div>
                            <div style="font-size: 0.75rem; color: var(--danger);">Due in 18 days ‚Ä¢ Jan 31</div>
                        </div>
                        <div style="padding: 1rem; background: #fef3c7; border-radius: 0.75rem; border-left: 4px solid var(--warning);">
                            <div style="font-weight: 600; font-size: 0.875rem;">Final Evaluation</div>
                            <div style="font-size: 0.75rem; color: #92400e;">Due in 32 days ‚Ä¢ Feb 14</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="profilePage" class="page">
            <div class="header">
                <h1>Profile</h1>
                <p>Your information</p>
            </div>

            <div class="content">
                <div class="card" style="text-align: center;">
                    <div style="width: 5rem; height: 5rem; background: linear-gradient(135deg, var(--primary-light), var(--primary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; font-weight: bold; margin: 0 auto 1rem;">AA</div>
                    <h2 style="font-size: 1.25rem; font-weight: 600;">Ahmed Al-Mansour</h2>
                    <p style="color: var(--text-gray); font-size: 0.875rem;">442202001</p>
                    <p style="color: var(--text-gray); font-size: 0.75rem; margin-top: 0.5rem;">APPE Class 2024</p>
                </div>

                <div class="card">
                    <h3 style="font-weight: 600; margin-bottom: 1rem;">Information</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Email</div>
                            <div style="font-size: 0.875rem;">ahmed.almansour@student.ksau-hs.edu.sa</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">GPA</div>
                            <div style="font-size: 0.875rem;">4.75</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-gray); font-weight: 600;">Current Rotation</div>
                            <div style="font-size: 0.875rem;">Community Pharmacy - Al-Nahdi</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 style="font-weight: 600; margin-bottom: 1rem;">Settings</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <button style="text-align: left; padding: 0.75rem; background: transparent; border: none; cursor: pointer; color: var(--text-dark); font-size: 0.875rem;">‚öôÔ∏è Notification Preferences</button>
                        <button style="text-align: left; padding: 0.75rem; background: transparent; border: none; cursor: pointer; color: var(--text-dark); font-size: 0.875rem;">üîê Change Password</button>
                        <button style="text-align: left; padding: 0.75rem; background: transparent; border: none; cursor: pointer; color: var(--text-dark); font-size: 0.875rem;">‚ÑπÔ∏è About</button>
                        <button onclick="logout()" style="text-align: left; padding: 0.75rem; background: transparent; border: none; cursor: pointer; color: var(--danger); font-size: 0.875rem; font-weight: 600;">üö™ Sign Out</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="showPage('dashboard')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
                <span class="nav-label">Home</span>
            </button>
            <button class="nav-item" onclick="showPage('messages')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                <span class="nav-label">Chat</span>
            </button>
            <button class="nav-item" onclick="showPage('calendar')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                <span class="nav-label">Calendar</span>
            </button>
            <button class="nav-item" onclick="showPage('profile')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span class="nav-label">Profile</span>
            </button>
        </nav>
    </div>

    <!-- Notifications Modal -->
    <div id="notificationsModal" class="modal">
        <div class="modal-content">
            <h2 style="font-weight: 600; margin-bottom: 1rem;">Notifications</h2>
            <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                <div style="padding: 1rem; background: #f0fdf4; border-radius: 0.75rem; border-left: 4px solid var(--success);">
                    <div style="font-weight: 600; font-size: 0.875rem;">‚úÖ Award Approved</div>
                    <div style="font-size: 0.75rem; color: var(--text-gray);">Your Dean's Honor List award has been verified</div>
                </div>
                <div style="padding: 1rem; background: #eff6ff; border-radius: 0.75rem; border-left: 4px solid var(--info);">
                    <div style="font-weight: 600; font-size: 0.875rem;">üí¨ New Message</div>
                    <div style="font-size: 0.75rem; color: var(--text-gray);">Khalid Abdullah sent you a message</div>
                </div>
                <div style="padding: 1rem; background: #fef3c7; border-radius: 0.75rem; border-left: 4px solid var(--warning);">
                    <div style="font-weight: 600; font-size: 0.875rem;">üìÖ Deadline Reminder</div>
                    <div style="font-size: 0.75rem; color: var(--text-gray);">PHRD 4.1 survey due in 18 days</div>
                </div>
            </div>
            <button onclick="closeModal('notificationsModal')" style="margin-top: 1.5rem; width: 100%; padding: 0.75rem; background: var(--primary-light); color: white; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer;">Close</button>
        </div>
    </div>

    <script>
        // Theme Toggle
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.querySelector('.theme-toggle').textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        // Load theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        document.querySelector('.theme-toggle').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

        // Login
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            document.querySelector('.login-screen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            initCharts();
            generateCalendar();
            showNotification('Welcome back, Ahmed! üëã');
            registerServiceWorker();
        });

        // Navigation
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageName + 'Page').classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        // Modals
        function openModal(modalId) {
            showNotification('Opening ' + modalId + ' form...');
        }

        function openNotifications() {
            document.getElementById('notificationsModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Notifications
        function showNotification(message) {
            const notif = document.createElement('div');
            notif.className = 'notification-badge';
            notif.innerHTML = message;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 3000);
        }

        // Chart
        function initCharts() {
            const ctx = document.getElementById('performanceChart');
            if (ctx) {
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Performance Score',
                            data: [65, 70, 75, 80, 78, 85, 88],
                            borderColor: '#4CAF50',
                            backgroundColor: 'rgba(76, 175, 80, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });
            }
        }

        // Calendar
        function generateCalendar() {
            const container = document.getElementById('miniCalendar');
            const days = [];
            for (let i = 1; i <= 31; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                if (i === 13) day.classList.add('today');
                if ([31].includes(i)) day.classList.add('event');
                day.textContent = i;
                container.appendChild(day);
            }
        }

        // Message
        function sendMessage() {
            showNotification('Message sent! üì§');
        }

        // Pull to Refresh
        let touchStartY = 0;
        document.addEventListener('touchstart', e => {
            touchStartY = e.touches[0].clientY;
        });

        document.addEventListener('touchmove', e => {
            const touchY = e.touches[0].clientY;
            const diff = touchY - touchStartY;
            if (diff > 50) {
                showNotification('Refreshing... ‚ü≥');
            }
        });

        // Logout
        function logout() {
            document.getElementById('mainApp').style.display = 'none';
            document.querySelector('.login-screen').style.display = 'flex';
        }

        // Service Worker for offline capability
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                const sw = `
                self.addEventListener('install', e => self.skipWaiting());
                self.addEventListener('activate', e => e.waitUntil(clients.claim()));
                self.addEventListener('fetch', e => {
                    if (e.request.method !== 'GET') return;
                    e.respondWith(
                        caches.match(e.request).catch(() => fetch(e.request))
                    );
                });
                `;
                const blob = new Blob([sw], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                navigator.serviceWorker.register(swUrl).catch(() => {});
            }
        }

        // Search functionality
        document.getElementById('searchInput')?.addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase();
            if (query.length > 0) {
                console.log('Searching for:', query);
            }
        });

        // Haptic feedback simulation
        function triggerHaptic() {
            if ('vibrate' in navigator) {
                navigator.vibrate(50);
            }
        }

        // Auto-show notification on load
        setTimeout(() => {
            showNotification('You have 3 pending tasks üìå');
        }, 2000);
    </script>
</body>
</html>
